jQuery(function($){function t(t){var a=$.ajax({url:userData.root+"/article/preview",type:"post",data:{title:"...",nest_srl:e.nest_srl.value,content:e.content.value}});a.done(function(e){t(e)})}var e=document.writeForm,a=new UploadInterface($("#fileUpload"),{form:e,$manager:$("#queuesManager"),uploadAction:userData.root+"/files/upload/",removeAction:userData.root+"/files/remove/",fileDir:userData.url+userData.originalPath,auto:!1,limit:5,thumnail:userData.thumnail,$insertTarget:$("#content"),insertFunc:function(t){for(var a="",n=0;n<t.length;n++)a+="![]("+t[n]+")\n";var r=$(e.content),o=l(r),i=r.val(),u=i.substr(0,o)+a+i.substr(o);r.val(u)}});if(!a.ready)return!1;var n=userData.pushData,r=n?JSON.parse(n):null;r&&a.pushQueue(r),$("#fileUploadButton").on("click",function(){a.upload()}),$(e).on("submit",function(){if(a.thumnailImageCheck())return!1;var t=a.thumnail.data.coords,n={thumnail:{srl:a.thumnail.data.srl,coords:t?t.toString():"",url:a.thumnail.data.url}};a.thumnail.data.image&&(e.thumnail_image.value=a.thumnail.data.image),n=encodeURIComponent(JSON.stringify(n)),e.json.value=n});var o=$("div.mk-editor"),i=o.find("a[role-control]");i.on("click",function(){var a=$(this).attr("role-control"),n=o.find("[role-target="+a+"]");if(!$(this).hasClass("active")&&(i.removeClass("active"),$(this).addClass("active"),o.find("[role-target]").removeClass("show"),n.addClass("show"),"preview"==a&&e.content.value))var r=t(function(t){n.html(t)});return!1});var l=function(t){var e=t.get(0),a=0;if("selectionStart"in e)a=e.selectionStart;else if("selection"in document){e.focus();var n=document.selection.createRange(),r=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),a=n.text.length-r}return a}});
//# sourceMappingURL=./post.min.js.map