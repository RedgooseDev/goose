var FilesQueue=function(e,t,n){var i=this,s=e;this.$index=t.children("ul"),this.index=new Object,this.count=0,this.active=new Array;var a=function(e,t,n,i,a){function r(e){var t="";t+='<div class="form">';for(var n=0;n<e.length;n++)t+="<p>",t+="<strong>"+e[n].label+"</strong>",t+='<span contenteditable="true" spellcheck="false" name="'+e[n].name+'">'+e[n].value+"</span>",t+="</p>";return t+="</div>"}var l='<li key="'+e+'">';return l+="<div>","ready"==n&&(l+='<div class="progress">',l+='<p class="graph"><span></span></p>',l+="</div>"),l+="<figure>",l+=i?'<img src="'+s.settings.fileDir+i+'" alt="'+t+'" />':"",l+="</figure>",l+='<div class="body">',l+='<p class="title">',l+="<strong>"+t+"</strong>",l+="ready"==n?'<span class="size">0%</span>':"",l+='<span class="status">'+n+"</span>",l+="</p>",l+=a?r(a):"",l+="</div>",l+="<nav>",l+='<button type="button" rg-action="delete" class="sp-ico">삭제</button>',l+="</nav>",l+="</div>",l+="</li>",$(l)},r=function(e){e.on("click",function(e){var t=i.getIndexItem($(this).attr("key"));i.selectQueue(t)}),e.find("[contenteditable]").on("click",function(e){e.stopPropagation()}),e.find("button[rg-action=delete]").on("click",function(t){t.stopPropagation(),confirm("파일을 삭제하시겠습니까?")&&i.removeQueue(e.closest("li"))})};this.createQueue=function(e){var n=i.count,l="queue-"+n,o=e.status?e.status:"ready",u=s.settings.queueForm;if(u)if(e.form)for(var c=0;c<e.form.length;c++)u[c]&&(u[c].value=e.form[c].value);else for(var c=0;c<u.length;c++)u[c].value="";var d=a(l,e.name,o,/^image/i.test(e.type)?e.loc:null,u);return i.index[l]={filename:e.name,filesize:e.size,filetype:e.type,status:o,element:d,location:e.loc,type:e.type2,srl:e.srl},t.children("ul").append(d),r(d),i.count++,l},this.selectQueue=function(e){e.element.hasClass("on")?e.element.removeClass("on"):(s.key||i.$index.children().removeClass("on"),e.element.addClass("on"))},this.selectAllQueue=function(){i.$index.children("li").hasClass("on")?i.$index.children("li").removeClass("on"):i.$index.children("li").addClass("on")},this.removeQueue=function(e){var t=s.settings.removeAction,n=e.map(function(){var e=i.getIndexItem($(this).attr("key"));return e.type+":"+e.srl}).get().join(",");if(t){var a=$.ajax({url:t,type:"post",dataType:"json",data:{data:n}});a.fail(function(e){log("AJAX ERROR"),e.error&&e.error(e.statusText)}).done(function(t){"success"==t.status&&(e.each(function(){delete i.index[$(this).attr("key")]}),e.fadeOut(400,function(){$(this).remove()}),s.refreshAddQueue())})}},this.getIndexItem=function(e){return i.index[e]},this.getItems=function(){return i.$index.children("li.on").map(function(e){return i.index[$(this).attr("key")]})},this.getThumnailItem=function(){return i.index[i.$index.children("li.thumnail").attr("key")]},this.updateThumnailClass=function(e){i.$index.children("li.thumnail").removeClass("thumnail"),e.addClass("thumnail")}};
//# sourceMappingURL=./FilesQueue.class.min.js.map