var FilesQueue=function(e,t,n){var i=this,s=e;this.$index=t.children("ul"),this.index=new Object,this.count=0,this.active=new Array,i.template=function(e,t,n,i,a,l){function r(e){var t="";t+='<div class="form">';for(var n=0;n<e.length;n++)t+="<p>",t+="<strong>"+e[n].label+"</strong>",t+='<span contenteditable="true" spellcheck="false" name="'+e[n].name+'">'+e[n].value+"</span>",t+="</p>";return t+="</div>"}var o='<li key="'+e+'">';return o+="<div>","ready"==n&&(o+='<div class="progress">',o+='<p class="graph"><span></span></p>',o+="</div>"),o+="<figure>",o+=i?'<img src="'+s.settings.fileDir+i+'" alt="'+t+'" />':"",o+="</figure>",o+='<div class="body">',o+='<p class="title">',o+="<strong>"+t+"</strong>",o+="ready"==n?'<span class="size">0%</span>':"",o+='<span class="status">'+n+"</span>",o+="</p>",o+=a?r(a):"",o+="</div>",o+="<nav>",o+=i?'		<button type="button" rg-action="thumnail" class="icn-thumnail" title="썸네일이미지"></button>\n':"",o+='		<button type="button" rg-action="delete" class="icn-close" title="삭제"></button>\n',o+="</nav>",o+="</div>",o+="</li>",$(o)};var a=function(e){e.on("click",function(e){var t=i.getIndexItem($(this).attr("key"));i.selectQueue(t)}),e.find("[contenteditable]").on("click",function(e){e.stopPropagation()}),e.find("nav > button").on("click",function(t){switch(t.stopPropagation(),$(this).attr("rg-action")){case"delete":confirm("파일을 삭제하시겠습니까?")&&i.removeQueue(e.closest("li"));break;case"thumnail":var n=s.queue.index[$(this).closest("li").attr("key")];/^image/i.test(n.filetype)&&s.thumnail.open(n)}})};this.createQueue=function(e){var n=i.count,l="queue-"+n,r=e.status?e.status:"ready",o=s.settings.queueForm;if(o)if(e.form)for(var u=0;u<e.form.length;u++)o[u]&&(o[u].value=e.form[u].value);else for(var u=0;u<o.length;u++)o[u].value="";var c=i.template(l,e.name,r,/^image/i.test(e.type)?e.loc:null,o);return i.index[l]={filename:e.name,filesize:e.size,filetype:e.type,status:r,element:c,location:e.loc,type:e.type2,srl:e.srl},t.children("ul").append(c),a(c),i.count++,l},this.selectQueue=function(e){e.element.hasClass("on")?e.element.removeClass("on"):(s.key||i.$index.children().removeClass("on"),e.element.addClass("on"))},this.selectAllQueue=function(){i.$index.children("li").hasClass("on")?i.$index.children("li").removeClass("on"):i.$index.children("li").addClass("on")},this.removeQueue=function(e){var t=s.settings.removeAction,n=e.map(function(){var e=i.getIndexItem($(this).attr("key"));return e.type+":"+e.srl}).get().join(",");if(t){var a=$.ajax({url:t,type:"post",dataType:"json",data:{data:n}});a.fail(function(e){log("AJAX ERROR"),e.error&&e.error(e.statusText)}).done(function(t){"success"==t.status&&(e.each(function(){delete i.index[$(this).attr("key")]}),e.fadeOut(400,function(){$(this).remove()}),s.refreshAddQueue())})}},this.getIndexItem=function(e){return i.index[e]},this.getItems=function(){return i.$index.children("li.on").map(function(e){return i.index[$(this).attr("key")]})},this.getThumnailItem=function(){return i.index[i.$index.children("li.thumnail").attr("key")]},this.updateThumnailClass=function(e){i.$index.children("li.thumnail").removeClass("thumnail"),e.addClass("thumnail")}};
//# sourceMappingURL=./FilesQueue.class.min.js.map