<?php
if (!defined('__GOOSE__')) exit();

$categoryName = ($repo['category']['name']) ? '<em class="category">'.$repo['category']['name'].'</em>&nbsp;' : '';
?>

<section>
	<div class="hgroup detail">
		<h1><?=$categoryName.$repo['article']['title']?></h1>
		<p>
			<span><?=Util::convertDate($repo['article']['regdate']).'&nbsp;'.Util::convertTime($repo['article']['regdate'])?></span>
			<span>HIT:<?=$repo['article']['hit']?></span>
		</p>
	</div>

	<!-- body -->
	<?php
	$content = htmlspecialchars($repo['article']['content']);
	$content = nl2br($content);
	?>
	<style>
	.articleBody {margin-top: 20px; margin-bottom: 20px;}
	</style>
	<div class="articleBody">
		<?=$content?>
	</div>
	<!-- // body -->

	<?php
	if (count($repo['file']))
	{
	?>
		<!-- attach files -->
		<article class="attach-files">
			<h1>Attach files</h1>
			<ul>
				<?php
				foreach($repo['file'] as $k=>$v)
				{
					$url = __GOOSE_ROOT__.$v['loc'];
					$size = Util::getFileSize($v['size']);
					echo "<li><a href=\"$url\" target=\"_blank\">$v[name] <em class=\"ui-text-count\">$size</em></a></li>";
				}
				?>
			</ul>
		</article>
		<!-- // attach files -->
	<?php
	}
	?>

	<hr />

	<!-- bottom navigation -->
	<nav class="btngroup">
		<?php
		if ($_GET['m'])
		{
			$url = __GOOSE_ROOT__.'/';
		}
		else
		{
			$url = __GOOSE_ROOT__.'article/index/';
			$url .= ($repo['nest']['srl']) ? $repo['nest']['srl'].'/' : '';
			$url .= ($category_srl) ? $category_srl.'/' : '';
			$url .= ($_GET['page'] > 1) ? '?page='.$_GET['page'] : '';
		}
		?>
		<span><a href="<?=$url?>" class="ui-button">목록</a></span>
		<?php
		$url = __GOOSE_ROOT__.'article/create/';
		$url .= ($repo['nest']['srl']) ? $repo['nest']['srl'].'/' : '';
		$url .= ($category_srl) ? $category_srl.'/' : '';
		$url .= ($_GET['m']) ? '?m='.$_GET['m'] : '';
		?>
		<span><a href="<?=$url?>" class="ui-button">글쓰기</a></span>
		<?php
		$url = __GOOSE_ROOT__.'article/modify/';
		$url .= ($category_srl) ? $category_srl.'/' : '';
		$url .= ($article_srl) ? $article_srl.'/' : '';
		$url .= ($_GET['page'] > 1) ? '?page='.$_GET['page'] : '';
		$url .= ($_GET['m']) ? '?m='.$_GET['m'] : '';
		?>
		<span><a href="<?=$url?>" class="ui-button btn-highlight">수정</a></span>
		<?php
		$url = __GOOSE_ROOT__.'article/remove/';
		$url .= ($category_srl) ? $category_srl.'/' : '';
		$url .= ($article_srl) ? $article_srl.'/' : '';
		$url .= ($_GET['page'] > 1) ? '?page='.$_GET['page'] : '';
		$url .= ($_GET['m']) ? '?m='.$_GET['m'] : '';
		?>
		<span><a href="<?=$url?>" id="docDelete" class="ui-button">삭제</a></span>
	</nav>
	<!-- // bottom navigation -->
</section>
