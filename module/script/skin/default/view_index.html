<?php
if (!defined('__GOOSE__')) exit();
?>

<section>
	<!-- headding -->
	<div class="gs-headding">
		<h1>
			<span>Script 목록</span>
		</h1>
		<p><?=$this->set['description']?></p>
		<?php
		if ($this->parent->isAdmin)
		{
		?>
			<nav>
				<a href="<?=__GOOSE_ROOT__?>/help/<?=$this->parent->name?>/" class="help" title="go to help">
					<i class="material-icons">help</i>
				</a>
				<a href="<?= __GOOSE_ROOT__ ?>/modules/editSetting/<?=$this->parent->name?>/" class="setting" title="edit setting">
					<i class="material-icons">settings</i>
				</a>
			</nav>
		<?php
		}
		?>
	</div>
	<!-- // headding -->

	<!-- index -->
	<ul class="idx-document list">
		<?php
		if (count($repo['run']) > 0)
		{
			foreach ($repo['run'] as $k=>$v)
			{
				$img = ($v['loc']) ? '<img src="'.__GOOSE_ROOT__.'/'.$v['loc'].'" alt="'.$v['name'].'"/>' : '<div class="noimg">noimg</div>';
				?>
				<li>
					<div class="wrap">
						<div class="body">
							<strong class="hd"><?=($v['meta']['name']) ? $v['meta']['name'] : $v['name']?></strong>
							<?=($v['meta']['description']) ? '<p class="description">'.$v['meta']['description'].'</p>' : ''?>
							<nav>
								<a href="<?=__GOOSE_ROOT__.'/script/run/'.$v['name'].'/'?>">실행하기</a>
							</nav>
						</div>
					</div>
				</li>
			<?php
			}
		}
		else
		{
			echo "<li class=\"empty\">데이터가 없습니다.</li>";
		}
		?>
	</ul>
	<!-- // index -->
</section>