<?php
if (!defined('__GOOSE__')) exit();
?>

<section>
	<div class="hgroup">
		<h1>APP 목록</h1>
	</div>
	<ul class="goose-index list">
		<?php
		if (count($repo['app']) > 0)
		{
			foreach ($repo['app'] as $k=>$v)
			{
				$nestCount = Spawn::count(array(
					'table' => Spawn::getTableName('nest'),
					'where' => 'app_srl='.(int)$v['srl']
				));
		?>
				<li>
					<dl>
						<dd>
							<strong class="big"><?=$v['name']?><em class="count"><?=$nestCount?></em></strong>
							<div class="inf">
								<span>ID : <?=$v['id']?></span>
							</div>
							<nav>
								<a href="<?=__GOOSE_ROOT__?>app/modify/<?=$v['srl']?>/">수정</a>
								<a href="<?=__GOOSE_ROOT__?>app/remove/<?=$v['srl']?>/">삭제</a>
							</nav>
						</dd>
					</dl>
				</li>
		<?php
			}
		}
		else
		{
			echo '<li class="empty">데이터가 없습니다.</li>';
		}
		?>
	</ul>
	<nav class="btngroup">
		<span><a href="<?=__GOOSE_ROOT__?>app/create/" class="ui-button btn-highlight">APP 만들기</a></span>
		<span><a href="<?=__GOOSE_ROOT__?>nest/index/" class="ui-button">둥지목록</a></span>
	</nav>
</section>