var FilesQueue=function(e,n,t){var i=this,s=e;this.$preview=n.children("figure.thumnail"),this.$index=n.children("ul"),this.index=new Object,this.count=0,this.active=new Array;var a=function(e,n,t){var i='<li key="'+e+'">\n';return i+='	<div class="body">\n',i+='		<span class="name">'+n+"</span>\n",i+="ready"==t?'		<span class="size">0%</span>\n':"",i+='		<span class="status">'+t+"</span>\n",i+="	</div>\n","ready"==t&&(i+='	<div class="progress">\n',i+='		<p class="graph"><span></span></p>\n',i+="	</div>\n"),i+="	<nav>\n",i+='		<button type="button" rg-action="delete" class="sp-ico">삭제</button>\n',i+="	</nav>\n",i+="</li>",$(i)},r=function(e){e.on("click",function(e){var n=i.getIndexItem($(this).attr("key"));i.selectQueue(n)}),e.find("nav > button").on("click",function(n){n.stopPropagation(),confirm("파일을 삭제하시겠습니까?")&&i.removeQueue(e.closest("li"))})};this.createQueue=function(e){var t=i.count,s="queue-"+t,l=e.status?e.status:"ready",u=a(s,e.name,l);return i.index[s]={filename:e.name,filesize:e.size,filetype:e.type,status:l,element:u,location:e.loc,type:e.type2,srl:e.srl},n.children("ul").append(u),r(u),i.count++,s},this.selectQueue=function(e){e.element.hasClass("on")?(e.element.removeClass("on"),i.clearPreview()):(s.key||i.$index.children().removeClass("on"),e.element.addClass("on"),/^image/i.test(e.filetype)&&i.$preview.length&&i.$preview.html('<img src="'+s.settings.fileDir+e.location+'" alt="" />'))},this.selectAllQueue=function(){i.$index.children("li").hasClass("on")?i.$index.children("li").removeClass("on"):i.$index.children("li").addClass("on")},this.removeQueue=function(e){var n=s.settings.removeAction,t=e.map(function(){var e=i.getIndexItem($(this).attr("key"));return e.type+":"+e.srl}).get().join(",");if(n){var a=$.ajax({url:n,type:"post",dataType:"json",data:{data:t}});a.fail(function(e){log("AJAX ERROR"),e.error&&e.error(e.statusText)}).done(function(n){"success"==n.status&&(e.each(function(){delete i.index[$(this).attr("key")]}),e.fadeOut(400,function(){$(this).remove()}),s.refreshAddQueue())})}},this.clearPreview=function(){i.$preview.html("")},this.getIndexItem=function(e){return i.index[e]},this.getItems=function(){return i.$index.children("li.on").map(function(e){return i.index[$(this).attr("key")]})},this.getThumnailItem=function(){return i.index[i.$index.children("li.thumnail").attr("key")]},this.updateThumnailClass=function(e){i.$index.children("li.thumnail").removeClass("thumnail"),e.addClass("thumnail")}};
//# sourceMappingURL=./FilesQueue.class.min.js.map