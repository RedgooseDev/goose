"use strict";var App=React.createClass({displayName:"App",getInitialState:function(){return{}},getPath:function(e){return e=e.replace(/^\/|\/$/g,""),e.split("/")},render:function(){return React.createElement("div",{className:"mod-resource"},React.createElement(Header,{apiUrl:userData.apiUrls.nav,path:this.getPath(this.props.location.pathname),ref:"header"}),React.cloneElement(this.props.children,{ref:"child",parent:this,userData:userData}))}});
"use strict";var Header=React.createClass({displayName:"Header",currentTitle:"",getInitialState:function(){return{nav:[]}},componentDidMount:function(){var t=this.props.apiUrl;this.getNavigations(t)},getNavigations:function(t){var e=this;jQuery.getJSON(t,function(t){t.result&&e.setState({nav:t.result})})},getTitle:function(){return this.currentTitle=$(ReactDOM.findDOMNode(this)).find("li.active > a").text(),this.currentTitle},render:function(){var t=this,e=this.props.path[0]?this.props.path:["nest","new"],a=this.state.nav.map(function(a,n){var i="";return a.url=a.id?"/nest/"+a.id+"/":"/",("nest"==e[0]||"article"==e[0]||0==n&&!e[0])&&(i=a.id==e[1]?"active":"",a.id==e[1]&&(t.currentTitle=a.name)),React.createElement("li",{key:"category-"+n,className:i},React.createElement(Link,{to:a.url},a.name))});return React.createElement("nav",{className:"category"},React.createElement("ul",null,a,React.createElement("li",{key:"category-setting",className:"setting"==e[0]?"active":""},React.createElement(Link,{to:"/setting/"},"SETTING"))))}});
"use strict";var Index=React.createClass({displayName:"Index",currentNest:"",currentPage:1,currentCategory:0,count:10,getInitialState:function(){return{loading:!1,items:[],navigation:null,categories:[],title:""}},componentDidMount:function(){this.currentNest=this.props.params.nest_id,this.currentPage=this.props.location.query.page?this.props.location.query.page:1,this.currentCategory=this.props.params.category_srl?parseInt(this.props.params.category_srl):0,this.setState({loading:!0}),this.getItems(this.currentNest,this.currentCategory,this.currentPage)},componentWillReceiveProps:function(e){var t=e.location.query.page?e.location.query.page:1,a=this.currentNest==e.params.nest_id,r=this.currentPage==t,n=this.currentCategory==e.params.category_srl;(!a||a&&!n||a&&n&&!r)&&(this.currentNest=e.params.nest_id,this.currentCategory=e.params.category_srl?e.params.category_srl:0,this.currentPage=t,this.setState({loading:!0}),this.getItems(this.currentNest,this.currentCategory,this.currentPage))},getItems:function(e,t,a){var r=this,n=this.props.userData.apiUrls.articles;n+="?format=json",n+="&field=srl,category_srl,nest_srl,title,hit,json,regdate,modate",n+="&count="+this.count,n+="&page="+a,n+=e&&"new"!=e?"&nest_id="+e:"",n+=t?"&category_srl="+t:"",jQuery.getJSON(n,function(e){e.result&&r.setState({loading:!1,items:e.result,navigation:e.navigation,categories:e.categories,title:r.props.parent.refs.header.getTitle()})})},render:function(){var e=this,t=void 0,a=void 0,r=void 0,n=React.createElement("li",{className:"loading-page"},React.createElement("span",{className:"mod-resource-loader"},"loading symbol"),React.createElement("span",{className:"message"},"loading.."));if(this.state.loading?t=n:this.state.items.length?(t=this.state.items.map(function(t,a){var r={backgroundImage:"url('"+e.props.userData.url_gooseAdmin+"/"+t.json.thumbnail.url+"')"};return React.createElement("li",{key:a},React.createElement(Link,{to:"/article/"+(e.currentNest?e.currentNest:"new")+"/"+t.srl+"/"},React.createElement("figure",{style:r},"image"),React.createElement("div",{className:"bd"},React.createElement("span",{className:"category-name"},t.category_name),React.createElement("strong",{className:"title"},t.title),React.createElement("div",{className:"inf"},React.createElement("span",null,React.createElement("b",null,"Ver : "+t.json.version)),React.createElement("span",null,"Update : "+t.modate),React.createElement("span",null,"Hit : "+t.hit),React.createElement("span",null,"Like : "+t.json.like)))))}),this.state.navigation&&!function(){var t=e.state.navigation,r=e.currentNest?"/nest/"+e.currentNest+"/":"/",n=e.props.location.query.keyword?"keyword="+e.props.location.query.keyword+"&":"";a=React.createElement("nav",{className:"paginate"},t.prev?React.createElement(Link,{to:r+"?"+n+"page="+t.prev.id,title:t.prev.name,className:"dir"},t.prev.name):null,t.body.map(function(e,t){var a=r+"?"+n+"page="+e.id;return e.active?React.createElement("strong",{key:"pageNav-"+t},e.name):React.createElement(Link,{to:a,key:"pageNav-"+t},e.name)}),t.next?React.createElement(Link,{to:r+"?"+n+"page="+t.next.id,title:t.next.name,className:"dir"},t.next.name):null)}()):t=React.createElement("li",{className:"noitem"},React.createElement("span",{className:"mod-resource-closed blades thick"},"loading icon"),React.createElement("span",{className:"message"},"not found item")),this.state.categories.length){var s=this.state.categories.map(function(t,a){var r="/nest/"+e.props.params.nest_id+"/"+(t.srl?t.srl+"/":""),n=e.currentCategory==t.srl||e.currentCategory!=t.srl&&t.srl<0?"active":"";return React.createElement("li",{key:"categoryItem-"+a,className:n},React.createElement(Link,{to:r},React.createElement("span",null,t.name),React.createElement("em",null,t.count)))});r=React.createElement("nav",{className:"article-categories"},React.createElement("ul",null,s))}return React.createElement("section",null,React.createElement("h1",null,this.state.title),r,React.createElement("ul",{className:"index"},t),a)}});
"use strict";var Install=React.createClass({displayName:"Install",classHtmlPopupMode:"mode-mod-resource-popup",getInitialState:function(){return{status:"register"}},componentDidMount:function(){var e=this;$("html").addClass(this.classHtmlPopupMode),window.onhashchange=function(){e.close(),window.onhashchange=null}},componentWillUnmount:function(){$("#"+this.props.parentID).remove(),$("html").removeClass(this.classHtmlPopupMode)},close:function(){try{ReactDOM.unmountComponentAtNode(document.getElementById(this.props.parentID))}catch(e){}},submit:function(e){var t=this;this.setState({status:"loading"}),$.post(e.target.action,$(e.target).serialize(),function(e,a,l){try{e=JSON.parse(e),t.setState({status:"register"}),"success"==e.state?(alert(e.message),t.close(),t.props.setDisabledInstallButton()):alert(e.message)}catch(s){}}),e.preventDefault()},render:function(){return React.createElement("article",{className:"mod-resource-popup"},React.createElement("div",{className:"bg",onClick:this.close}),React.createElement("form",{action:this.props.action,method:"post",onSubmit:this.submit},React.createElement("h1",null,"Install"),React.createElement("input",{type:"hidden",name:"install_file",defaultValue:this.props.file}),React.createElement("fieldset",{className:"register"==this.state.status?" show":""},React.createElement("legend",{className:"blind"},"Install form"),React.createElement("p",{className:"guide"},React.createElement("strong",null,this.props.title),"은 설치경로 항목의 경로에 설치됩니다.",React.createElement("br",null),"경로를 변경할 수 있지만 작동이 안될 수 있습니다."),React.createElement("dl",null,React.createElement("dt",null,React.createElement("label",{htmlFor:"frm_pwd"},"설치경로")),React.createElement("dd",null,React.createElement("input",{type:"text",name:"pwd",id:"frm_pwd",defaultValue:this.props.location})))),React.createElement("div",{className:"loading"+("loading"==this.state.status?" show":"")},React.createElement("span",{className:"mod-resource-loader"},"loading symbol"),React.createElement("span",{className:"msg"},"loading..")),React.createElement("nav",null,React.createElement("span",null,React.createElement("button",{type:"button",className:"ui-button color-danger block",onClick:this.close},"Close")),React.createElement("span",null,React.createElement("button",{type:"submit",className:"ui-button color-install block"},"Install")))))}});
"use strict";var Setting=React.createClass({displayName:"Setting",$form:null,getInitialState:function(){return{title:"",readyFTP:!1}},componentDidMount:function(){this.$form=$(ReactDOM.findDOMNode(this.refs.settingForm)),this.setState({title:this.props.parent.refs.header.getTitle()})},checkFTP:function(){var e=this;$.post(this.props.userData.url+"/testFTP/",this.$form.serialize(),function(t){t=JSON.parse(t),"success"==t.state?(e.setState({readyFTP:!0}),alert(t.message)):(e.setState({readyFTP:!1}),alert(t.message))})},render:function(){return React.createElement("section",null,React.createElement("h1",null,this.state.title),React.createElement("form",{action:this.props.userData.url+"/updateFTP/",method:"post",name:"ftpSetting",className:"setting",ref:"settingForm"},React.createElement("input",{type:"hidden",name:"redir",defaultValue:this.props.userData.url+"/#/setting/"}),React.createElement("fieldset",null,React.createElement("legend",{className:"blind"},"ftp 설정 폼"),React.createElement("dl",{className:"first"},React.createElement("dt",null,React.createElement("label",{htmlFor:"host_name"},"Host name")),React.createElement("dd",null,React.createElement("input",{type:"text",name:"host_name",id:"host_name",maxLength:"40",size:"24",defaultValue:this.props.userData.ftp.host?this.props.userData.ftp.host:"",placeholder:"hostname.com"}))),React.createElement("dl",null,React.createElement("dt",null,React.createElement("label",{htmlFor:"host_id"},"ID")),React.createElement("dd",null,React.createElement("input",{type:"text",name:"host_id",id:"host_id",size:"15",maxLength:"20",defaultValue:this.props.userData.ftp.id?this.props.userData.ftp.id:"",placeholder:"FTP ID"}))),React.createElement("dl",null,React.createElement("dt",null,React.createElement("label",{htmlFor:"host_pw"},"Password")),React.createElement("dd",null,React.createElement("input",{type:"password",name:"host_pw",id:"host_pw",size:"15",maxLength:"20",defaultValue:"",placeholder:"FTP Password"}))),React.createElement("dl",null,React.createElement("dt",null,React.createElement("label",{htmlFor:"host_pwd"},"Location")),React.createElement("dd",null,React.createElement("input",{type:"text",name:"host_pwd",id:"host_pwd",size:"40",maxLength:"100",className:"block",defaultValue:this.props.userData.ftp.pwd,placeholder:"ftp Password"}),React.createElement("p",null,"goose가 설치된 ftp경로를 지정합니다.")))),React.createElement("nav",{className:"btn-group"},React.createElement(Link,{to:"/",className:"ui-button size-large"},"목록"),React.createElement("button",{type:"button",className:"ui-button size-large color-key",onClick:this.checkFTP},"FTP 테스트"),React.createElement("button",{type:"submit",className:"ui-button size-large color-key","data-action":"update_ftp",disabled:this.state.readyFTP?"":"disabled"},"업데이트"))))}});
"use strict";var View=React.createClass({displayName:"View",srl:null,popup_id:"modResourcePopup",getInitialState:function(){return{title:"",loading:!0,item:null,countLike:0,countHit:0,enableLike:!this.getCookie("like-"+this.props.params.srl),is_install:!1,overlap_install:!1}},componentDidMount:function(){this.srl=this.props.params.srl,this.getItem(this.srl),this.checkInstall()},setCookie:function(e,t,a){var s=new Date,l=e+"="+t+"; path=/ ";s.setDate(s.getDate()+a),l+="undefined"!=typeof a?";expires="+s.toGMTString()+";":"",document.cookie=l},getCookie:function(e){e+="=";var t=document.cookie,a=t.indexOf(e),s="";if(a!=-1){a+=e.length;var l=t.indexOf(";",a);l==-1&&(l=t.length),s=t.substring(a,l)}return s},getItem:function(e){var t=this,a=this.props.userData.apiUrls.article;a+="?format=json",a+="&srl="+e,jQuery.getJSON(a,function(a){a.result&&(t.updateHit(e),t.checkInstallLocation(a.result.json.install_loc),t.setState({loading:!1,item:a.result,title:t.props.parent.refs.header.getTitle()}))})},updateHit:function(e){var t=this;if(!this.getCookie("hit-"+this.srl)){var a=this.props.userData.url_gooseAPI;a+="/article/updateHit/",a+="?format=json&srl="+this.srl,jQuery.ajax({url:a,headers:{Accept:"application=goose;"}}).done(function(e){try{if(e=JSON.parse(e),"success"!=e.state)throw"error update hit";t.setCookie("hit-"+t.srl,"1",30),t.setState({countHit:e.result.hit})}catch(a){alert(a)}})}},upLike:function(){var e=this;if(!this.getCookie("like-"+this.srl)){var t=this.props.userData.url_gooseAPI;t+="/article/updateLike/",t+="?format=json&srl="+this.srl,jQuery.ajax({url:t,headers:{Accept:"application=goose;"}}).done(function(t){try{if(t=JSON.parse(t),"success"!=t.state)throw"error update like";e.setCookie("like-"+e.srl,"1",1),e.setState({countLike:t.result.like,enableLike:!1})}catch(a){alert(a)}})}},checkInstall:function(){var e=this;jQuery.getJSON(this.props.userData.url+"/checkInstall/",function(t){"success"==t.state?e.setState({is_install:!0}):e.setState({is_install:!1})})},setDisabledInstallButton:function(){this.setState({overlap_install:!0})},checkInstallLocation:function(e){var t=this;jQuery.post(this.props.userData.url+"/checkInstallLocation/",{location:e},function(e){try{e=JSON.parse(e),t.setState({overlap_install:e.overlap})}catch(a){}})},install:function(){if($("#"+this.popup_id).length>0)return!1;var e=$('<div id="'+this.popup_id+'"></div>');$("body").append(e),ReactDOM.render(React.createElement(Install,{parentID:this.popup_id,action:this.props.userData.url+"/install/",location:this.state.item.json.install_loc,file:this.props.userData.url_gooseAdmin+"/"+this.state.item.json.install_src.location,title:this.state.item.title,setDisabledInstallButton:this.setDisabledInstallButton}),document.getElementById(this.popup_id))},render:function(){var e=null,t=React.createElement("div",{className:"loading-page"},React.createElement("span",{className:"mod-resource-loader"},"loading symbol"),React.createElement("span",{className:"message"},"loading..")),a=React.createElement("button",{type:"button",className:"ui-button size-large color-install",disabled:this.state.overlap_install,onClick:this.install},"Install"),s=null;if(this.state.item&&!this.state.is_install&&this.state.item.json.install_loc){var l=this.props.userData.url_gooseAdmin+"/"+this.state.item.json.install_src.location;s=React.createElement("div",{className:"install-info"},React.createElement("dl",null,React.createElement("dt",null,"설치경로"),React.createElement("dd",null,this.state.item.json.install_loc)),React.createElement("dl",null,React.createElement("dt",null,"설치파일"),React.createElement("dd",null,React.createElement("a",{href:l},l))))}if(this.state.loading)e=t;else if(this.state.item){var i=this.state.item,n=this.state.countHit?this.state.countHit:i.hit,o=this.state.countLike?this.state.countLike:i.json.like;e=React.createElement("section",{className:"view"},React.createElement("header",null,React.createElement("h1",null,React.createElement("span",null,i.title),React.createElement("em",{className:"version"},i.json.version)),React.createElement("div",{className:"metas"},React.createElement("span",null,"Uploader : "+i.json.user.name),React.createElement("span",null,"Regdate : "+i.regdate),React.createElement("span",null,"Updated : "+i.modate),React.createElement("span",null,"Hit : ",React.createElement("em",{"data-target":"hit"},n)),React.createElement("span",null,"Like : ",React.createElement("em",{"data-target":"like"},o)))),s,React.createElement("div",{className:"con-body",dangerouslySetInnerHTML:{__html:i.content}}),React.createElement("nav",{className:"nav-bottom"},this.state.item.json.install_loc&&this.state.is_install?a:null,React.createElement("button",{type:"button",className:"ui-button size-large color-key",onClick:this.upLike,disabled:this.state.enableLike?"":"disabled"},React.createElement("span",null,"Like"),React.createElement("em",null,o)),React.createElement(Link,{to:"/nest/"+this.props.params.nest_id+"/",className:"ui-button size-large color-danger"},"Close")))}else e=React.createElement("div",{className:"noitem"},React.createElement("span",{className:"mod-resource-closed blades thick"},"loading icon"),React.createElement("span",{className:"message"},"not found item"));return e}});
"use strict";var Router=window.ReactRouter.Router,Link=window.ReactRouter.Link,Route=window.ReactRouter.Route,IndexRoute=window.ReactRouter.IndexRoute,createHashHistory=window.History.createHashHistory;ReactDOM.render(React.createElement(Router,{history:createHashHistory({queryKey:!1})},React.createElement(Route,{path:"/",component:App},React.createElement(IndexRoute,{component:Index}),React.createElement(Route,{path:"nest/:nest_id/",component:Index},React.createElement(Route,{path:":category_srl/",component:Index})),React.createElement(Route,{path:"article/:nest_id/:srl/",component:View}),React.createElement(Route,{path:"setting/",component:Setting}))),document.getElementById("resourceApp"));